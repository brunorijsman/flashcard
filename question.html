<!DOCTYPE html>
<html lang="en">

<head>
    <title>Question</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>

    <div class="container">

        <br>

        <row>
            <div class="panel panel-default">

                <div class="panel-heading">
                    <h4>
                        <span id="question-text"></span>
                    </h4>
                </div>
                <div class="panel-body" id="answer" style="display:none">
                    <h4>
                        <span id="answer-text"></span>
                    </h4>
                </div>
            </div>
        </row>

        <row>
            <button type="button" class="btn btn-default" onclick="recordDontKnowIt()">
                <span class="glyphicon glyphicon glyphicon-remove" style="color:red"></span>
                <span id="i-dont-know-this-text">I do not know this</span>
            </button>
            <button type="button" class="btn btn-default" onclick="reverseAnswer()">
                <span class="glyphicon glyphicon glyphicon-repeat"></span>
                <span id="show-hide-text">Show answer</span>
            </button>
            <button type="button" class="btn btn-default" onclick="recordKnowIt()">
                <span class="glyphicon glyphicon glyphicon-ok" style="color:green"></span>
                <span id="i-know-this-text">I know this</span>
            </button>
            <span class="pull-right">
                <button type="button" class="btn btn-default">
                    End quiz
                </button>
                <button type="button" class="btn btn-default">
                    Options
                </button>
            </span>
        </row>


    </div>

    <script type="text/javascript">

        answerVisible = false

        const lowerCaseC = "c".charCodeAt(0)
        const upperCaseC = "C".charCodeAt(0)
        const lowerCaseV = "v".charCodeAt(0)
        const upperCaseV = "V".charCodeAt(0)
        const lowerCaseX = "x".charCodeAt(0)
        const upperCaseX = "X".charCodeAt(0)

        const questions = [
            { q: "What skin pattern does a zebra have?", a: "Stripes." },
            { q: "Who is the president of the United States?", a: "Donald Trump." },
            { q: "How many eggs are there in a dozen?", a: "Twelve" }
        ]

        var currentQuestionNr = null
        var currentQuestion = null

        function revealAnswer() {
            $('#answer').show()
            $("#show-hide-text").text("Hide answer")
            $("#i-know-this-text").text("I knew this")
            $("#i-dont-know-this-text").text("I did not know this")
            answerVisible = true
        }

        function hideAnswer() {
            $('#answer').hide()
            $("#show-hide-text").text("Show answer")
            $("#i-know-this-text").text("I know this")
            $("#i-dont-know-this-text").text("I do not know this")
            answerVisible = false
        }

        function reverseAnswer() {
            if (answerVisible) {
                hideAnswer()
            } else {
                revealAnswer()
            }
        }

        function nextQuestion() {
            var randomQuestionNr
            do {
                randomQuestionNr = Math.floor(Math.random() * questions.length)
            } while (randomQuestionNr === currentQuestionNr)
            console.info(randomQuestionNr)
            currentQuestionNr = randomQuestionNr
            currentQuestion = questions[randomQuestionNr]
            $("#question-text").text(currentQuestion.q)
            $("#answer-text").text(currentQuestion.a)
        }

        function recordKnowIt() {
            console.info("Know it")
            hideAnswer()
            nextQuestion()
        }

        function recordDontKnowIt() {
            console.info("Don't know it")
            hideAnswer()
            nextQuestion()
        }

        $(document).ready(function () {

            nextQuestion()

            $(document).keypress(function (key) {
                console.info("keypress")
                if ((key.which === lowerCaseX) || (key.which === upperCaseX)) {
                    recordDontKnowIt()
                } else if ((key.which === lowerCaseC) || (key.which === upperCaseC)) {
                    reverseAnswer()
                } else if ((key.which === lowerCaseV) || (key.which === upperCaseV)) {
                    recordKnowIt()
                }
            });

        });

    </script>


</body>

</html>